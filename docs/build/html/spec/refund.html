

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Refund &mdash; interBTC Specification  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Redeem" href="redeem.html" />
    <link rel="prev" title="Issue" href="issue.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: grey" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> interBTC Specification
          

          
          </a>

          
            
            
              <div class="version">
                v5.5.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/at-a-glance.html">BTC Parachain at a Glance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/CbA.html">Cryptocurrency-backed Assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/polkadot.html">Polkadot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/xclaim-architecture.html">XCLAIM Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/btcrelay-architecture.html">BTC-Relay Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/bitcoin.html">Bitcoin Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro/accepted-format.html">Accepted Bitcoin Transaction Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">How to Read This Specification</a></li>
</ul>
<p class="caption"><span class="caption-text">XCLAIM Specification</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="collateral.html">Collateral</a></li>
<li class="toctree-l1"><a class="reference internal" href="fee.html">Fee</a></li>
<li class="toctree-l1"><a class="reference internal" href="oracle.html">Exchange Rate Oracle</a></li>
<li class="toctree-l1"><a class="reference internal" href="issue.html">Issue</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Refund</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step">Step-by-step</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-model">Data Model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#scalars">Scalars</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#refundbtcdustvalue">RefundBtcDustValue</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#maps">Maps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#refundrequests">RefundRequests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#structs">Structs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Refund</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#external-functions">External Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#executerefund">executeRefund</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#specification">Specification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#internal-functions">Internal Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requestrefund">requestRefund</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id6">Specification</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#events">Events</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requestrefundevent">RequestRefund</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executerefundevent">ExecuteRefund</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="redeem.html">Redeem</a></li>
<li class="toctree-l1"><a class="reference internal" href="replace.html">Replace</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="relay.html">Relay</a></li>
<li class="toctree-l1"><a class="reference internal" href="treasury.html">Treasury</a></li>
<li class="toctree-l1"><a class="reference internal" href="vault-registry.html">Vault Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="nomination.html">Vault Nomination</a></li>
<li class="toctree-l1"><a class="reference internal" href="reward.html">Reward</a></li>
<li class="toctree-l1"><a class="reference internal" href="staking.html">Staking</a></li>
</ul>
<p class="caption"><span class="caption-text">BTC-Relay Specification</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/data-model.html">Data Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/functions.html">Functions: Storage and Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/parser.html">Functions: Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/helpers.html">Functions: Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="btc-relay/errors.html">Error Codes</a></li>
</ul>
<p class="caption"><span class="caption-text">Security and Performance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/liquidations.html">Vault Liquidations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/xclaim-security.html">XCLAIM Security Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/btcrelay-security.html">Security Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security_performance/performance.html">Performance Analysis</a></li>
</ul>
<p class="caption"><span class="caption-text">Economics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../economics/incentives.html">Economic Incentives</a></li>
<li class="toctree-l1"><a class="reference internal" href="../economics/fees.html">Fee Model</a></li>
</ul>
<p class="caption"><span class="caption-text">All the rest</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../other/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../other/interlay.html">Interlay</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">interBTC Specification</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Refund</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/spec/refund.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="refund">
<span id="refund-protocol"></span><h1>Refund<a class="headerlink" href="#refund" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Refund module is a user failsafe mechanism. In case a user accidentally locks more Bitcoin than the actual issue request, the refund mechanism seeks to ensure that either (1) the initial issue request is increased to issue more interBTC or (2) the BTC are returned to the sending user.</p>
<div class="section" id="step-by-step">
<h3>Step-by-step<a class="headerlink" href="#step-by-step" title="Permalink to this headline">¶</a></h3>
<p>If a user falsely sends additional BTC (i.e., <span class="math notranslate nohighlight">\(|\text{BTC}| &gt; |\text{interBTC}|\)</span>) during the issue process:</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt><strong>Case 1: The originally selected vault has sufficient collateral locked to cover the entire BTC amount sent by the user</strong>:</dt><dd><ol class="loweralpha simple">
<li><p>Increase the issue request interBTC amount and the fee to reflect the actual BTC amount paid by the user.</p></li>
<li><p>As before, issue the interBTC to the user and forward the fees.</p></li>
<li><p>Emit an event that the issue amount was increased.</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><strong>Case 2: The originally selected vault does NOT have sufficient collateral locked to cover the additional BTC amount sent by the user</strong>:</dt><dd><ol class="loweralpha simple">
<li><p>Automatically create a return request from the issue module that includes a return fee (deducted from the originial BTC payment) paid to the vault returning the BTC.</p></li>
<li><p>The vault fulfills the return request via a transaction inclusion proof (similar to execute issue). However, this does not create new interBTC.</p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only case 2 is handled in this module. Case 1 is handled directly by the issue module.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Normally, enforcing actions by a vault is achieved by locking collateral of the vault and slashing the vault in case of misbehavior. In the case where a user sends too many BTC and the vault does not have enough “free” collateral left, we cannot lock more collateral. However, the original vault cannot move the additional BTC sent as this would be flagged as theft and the vault would get slashed. The vault can possibly take the overpaid BTC though if the vault would not be backing any interBTC any longer (e.g. due to redeem/replace).</p>
</div>
</div>
<div class="section" id="security">
<h3>Security<a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Unique identification of Bitcoin payments: <a class="reference internal" href="../security_performance/xclaim-security.html#op-return"><span class="std std-ref">OP_RETURN</span></a></p></li>
</ul>
</div>
</div>
<div class="section" id="data-model">
<h2>Data Model<a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h2>
<div class="section" id="scalars">
<h3>Scalars<a class="headerlink" href="#scalars" title="Permalink to this headline">¶</a></h3>
<div class="section" id="refundbtcdustvalue">
<span id="id1"></span><h4>RefundBtcDustValue<a class="headerlink" href="#refundbtcdustvalue" title="Permalink to this headline">¶</a></h4>
<p>The minimum amount of BTC that is required for refund requests; lower values would risk the rejection of payment on Bitcoin.</p>
</div>
</div>
<div class="section" id="maps">
<h3>Maps<a class="headerlink" href="#maps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="refundrequests">
<span id="id2"></span><h4>RefundRequests<a class="headerlink" href="#refundrequests" title="Permalink to this headline">¶</a></h4>
<p>Overpaid issue payments create refund requests to return BTC. This mapping provides access from a unique hash <code class="docutils literal notranslate"><span class="pre">RefundId</span></code> to a <code class="docutils literal notranslate"><span class="pre">Refund</span></code> struct. <code class="docutils literal notranslate"><span class="pre">&lt;RefundId,</span> <span class="pre">Refund&gt;</span></code>.</p>
</div>
</div>
<div class="section" id="structs">
<h3>Structs<a class="headerlink" href="#structs" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>Refund<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Stores the status and information about a single refund request.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 13%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">vault</span></code></p></td>
<td><p>AccountId</p></td>
<td><p>The account of the Vault responsible for this request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">amountWrapped</span></code></p></td>
<td><p>interBTC</p></td>
<td><p>Amount of interBTC to be refunded.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fee</span></code></p></td>
<td><p>interBTC</p></td>
<td><p>Fee charged to the user for refunding.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">amountBtc</span></code></p></td>
<td><p>interBTC</p></td>
<td><p>Total amount that was overpaid.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">issuer</span></code></p></td>
<td><p>AccountId</p></td>
<td><p>Account that overpaid on issue.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">btcAddress</span></code></p></td>
<td><p>BtcAddress</p></td>
<td><p>User’s Bitcoin address.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">issueId</span></code></p></td>
<td><p>H256</p></td>
<td><p>The id of the issue request.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">completed</span></code></p></td>
<td><p>bool</p></td>
<td><p>True if the refund was processed successfully.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="external-functions">
<h2>External Functions<a class="headerlink" href="#external-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="executerefund">
<span id="id4"></span><h3>executeRefund<a class="headerlink" href="#executerefund" title="Permalink to this headline">¶</a></h3>
<p>This function finalizes a refund, also referred to as a user failsafe.
It is typically called by the vault client that performed the refund.</p>
<div class="section" id="specification">
<h4>Specification<a class="headerlink" href="#specification" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">executeRefund(caller,</span> <span class="pre">refundId,</span> <span class="pre">merkleProof,</span> <span class="pre">rawTx)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">caller</span></code>: address of the user finalizing the refund. Typically the vault client that performed the refund.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refundId</span></code>: the unique hash created during the internal <code class="docutils literal notranslate"><span class="pre">requestRefund</span></code> function.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rawMerkleProof</span></code>: raw Merkle tree path (concatenated LE SHA256 hashes).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rawTx</span></code>: raw Bitcoin transaction of the refund payment, including the transaction inputs and outputs.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#executerefundevent"><span class="std std-ref">ExecuteRefund</span></a></p></li>
</ul>
<p><em>Preconditions</em></p>
<ul class="simple">
<li><p>The function call MUST be signed by <em>someone</em>, i.e., not necessarily the Vault that performed the refund.</p></li>
<li><p>The BTC Parachain status in the <a class="reference internal" href="security.html#security"><span class="std std-ref">Security</span></a> component MUST NOT be set to <code class="docutils literal notranslate"><span class="pre">SHUTDOWN:2</span></code>.</p></li>
<li><p>A <em>pending</em> <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code> MUST exist with an id equal to <code class="docutils literal notranslate"><span class="pre">refundId</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refundRequest.completed</span></code> MUST be <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rawTx</span></code> MUST decode to a valid transaction that transfers the amount specified in the <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code> struct. It MUST be a transaction to the correct address, and provide the expected OP_RETURN, based on the <code class="docutils literal notranslate"><span class="pre">RefundRequest</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rawMerkleProof</span></code> MUST be valid and prove inclusion to the main chain.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">vault.status</span></code> MUST be <code class="docutils literal notranslate"><span class="pre">active</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vault.isBanned()</span></code> MUST return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p>The refunding vault MUST have enough collateral to mint an amount equal to the refund fee.</p></li>
</ul>
<p><em>Postconditions</em></p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">vault.issuedTokens</span></code> MUST increase by <code class="docutils literal notranslate"><span class="pre">fee</span></code>.</p></li>
<li><p>The <a class="reference internal" href="treasury.html#totalsupply"><span class="std std-ref">TotalSupply</span></a> in the <a class="reference internal" href="treasury.html#treasury-module"><span class="std std-ref">Treasury</span></a> MUST increase by <code class="docutils literal notranslate"><span class="pre">fee</span></code>.</p></li>
<li><p>The vault’s free balance in the <a class="reference internal" href="treasury.html#treasury-module"><span class="std std-ref">Treasury</span></a> MUST increase by <code class="docutils literal notranslate"><span class="pre">fee</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refundRequest.completed</span></code> MUST be <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="internal-functions">
<h2>Internal Functions<a class="headerlink" href="#internal-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requestrefund">
<span id="id5"></span><h3>requestRefund<a class="headerlink" href="#requestrefund" title="Permalink to this headline">¶</a></h3>
<p>Used to request a refund if too much BTC was sent to a Vault by mistake.</p>
<div class="section" id="id6">
<h4>Specification<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<p><em>Function Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">requestRefund(amount,</span> <span class="pre">vault,</span> <span class="pre">issuer,</span> <span class="pre">btcAddress,</span> <span class="pre">issueId)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">amount</span></code>: the amount that the user has overpaid.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vault</span></code>: id of the vault the issue was made to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">issuer</span></code>: id of the user that made the issue request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">btcAddress</span></code>: the btc address that should receive the refund.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">issueId</span></code>: corresponding issue request which was overpaid.</p></li>
</ul>
<p><em>Events</em></p>
<ul class="simple">
<li><p><a class="reference internal" href="#requestrefundevent"><span class="std std-ref">RequestRefund</span></a></p></li>
</ul>
<p><em>Preconditions</em></p>
<ul class="simple">
<li><p>The function call MUST only be called by <a class="reference internal" href="issue.html#executeissue"><span class="std std-ref">executeIssue</span></a>.</p></li>
<li><p>The BTC Parachain status in the <a class="reference internal" href="security.html#security"><span class="std std-ref">Security</span></a> component MUST NOT be set to <code class="docutils literal notranslate"><span class="pre">SHUTDOWN:2</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">amount</span> <span class="pre">-</span> <span class="pre">fee</span></code> MUST be greater than or equal to <a class="reference internal" href="#refundbtcdustvalue"><span class="std std-ref">RefundBtcDustValue</span></a>.</p></li>
<li><p>A new unique <code class="docutils literal notranslate"><span class="pre">refundId</span></code> MUST be generated via the <a class="reference internal" href="security.html#generatesecureid"><span class="std std-ref">generateSecureId</span></a> function.</p></li>
</ul>
<p><em>Postconditions</em></p>
<ul>
<li><p>The new refund request MUST be created as follows:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">refund.vault</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">vault</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.amountWrapped</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">amount</span> <span class="pre">-</span> <span class="pre">fee</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.fee</span></code>: MUST equal <code class="docutils literal notranslate"><span class="pre">amount</span></code> multiplied by <a class="reference internal" href="fee.html#refundfee"><span class="std std-ref">RefundFee</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.amountBtc</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">amount</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.issuer</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">issuer</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.btcAddress</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">btcAddress</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.issueId</span></code>: MUST be the <code class="docutils literal notranslate"><span class="pre">issueId</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">refund.completed</span></code>: MUST be false.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The new refund request MUST be inserted into <a class="reference internal" href="#refundrequests"><span class="std std-ref">RefundRequests</span></a> using the generated <code class="docutils literal notranslate"><span class="pre">refundId</span></code> as the key.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this headline">¶</a></h2>
<div class="section" id="requestrefundevent">
<span id="id7"></span><h3>RequestRefund<a class="headerlink" href="#requestrefundevent" title="Permalink to this headline">¶</a></h3>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">RequestRefund(refundId,</span> <span class="pre">issuer,</span> <span class="pre">amount,</span> <span class="pre">vault,</span> <span class="pre">btcAddress,</span> <span class="pre">issueId,</span> <span class="pre">fee)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">refundId</span></code>: A unique hash created via <a class="reference internal" href="security.html#generatesecureid"><span class="std std-ref">generateSecureId</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">issuer</span></code>: The user’s account identifier.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">amount</span></code>: The amount of interBTC overpaid.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vault</span></code>: The address of the Vault involved in this refund request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">issueId</span></code>: The unique hash created during <a class="reference internal" href="issue.html#requestissue"><span class="std std-ref">requestIssue</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fee</span></code>: The amount of interBTC to mint as fees.</p></li>
</ul>
</div>
<div class="section" id="executerefundevent">
<span id="id8"></span><h3>ExecuteRefund<a class="headerlink" href="#executerefundevent" title="Permalink to this headline">¶</a></h3>
<p><em>Event Signature</em></p>
<p><code class="docutils literal notranslate"><span class="pre">ExecuteRefund(refundId,</span> <span class="pre">issuer,</span> <span class="pre">vault,</span> <span class="pre">amount,</span> <span class="pre">fee)</span></code></p>
<p><em>Parameters</em></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">refundId</span></code>: The unique hash created during via :ref:<code class="docutils literal notranslate"><span class="pre">requestRefund</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">issuer</span></code>: The user’s account identifier.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vault</span></code>: The address of the Vault involved in this refund request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">amount</span></code>: The amount of interBTC refunded.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fee</span></code>: The amount of interBTC to mint as fees.</p></li>
</ul>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="redeem.html" class="btn btn-neutral float-right" title="Redeem" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="issue.html" class="btn btn-neutral float-left" title="Issue" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2021, Interlay

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>